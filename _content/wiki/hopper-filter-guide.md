---
title: "ホッパーフィルターの設定方法"
description: "ホッパーに名前を付けてアイテムを自動仕分けする方法のガイドです"
order: 9
tags: ["国家鯖"]
---

# 🔧 ホッパーフィルターの設定方法

ホッパーに名前を付けると、特定のアイテムだけを通すフィルター機能が使えます。
これにより、複雑なレッドストーン回路を組まなくても、簡単に高性能なアイテム仕分けシステムが作れます。

## 📖 目次
1. [ホッパーの名前変更方法](#1-ホッパーの名前変更方法)
2. [基本構文](#2-基本構文)
    - [パターン修飾子](#パターン修飾子)
    - [ブール演算子](#ブール演算子)
3. [使用例](#3-使用例)
    - [基本的な例](#基本的な例)
    - [複合条件の例](#複合条件の例)
    - [エンチャント・ポーションの例](#エンチャントポーションの例)
    - [高度な例](#高度な例)
4. [動作の癖と注意点](#4-動作の癖と注意点)

---

## 1. ホッパーの名前変更方法
金床を使わずに、ホッパーにフィルターを設定する方法です。

### 🔨 設定手順

**ステップ1: スニークしながらホッパーを左クリック**

**ステップ2: 以下の2つの方法のいずれかで設定**

#### 方法A: アイテムを手に持っている場合
*   持っているアイテムの名前がホッパーのフィルターに追加されます
*   複数のアイテムを登録したい場合は、スニークしたまま別のアイテムを持って再度クリックします
*   スニークを解除すると設定完了です
*   **例:** 石と土だけを通したい場合、石を持ってクリック→土を持ってクリック→スニーク解除

#### 方法B: 手に何も持っていない場合
*   次にチャットで入力する文字列がそのままフィルターになります
*   この方法なら、金床の50文字制限を超える長いフィルターも設定できます
*   複雑な条件（後述の記号を使った設定）を使いたい場合はこちらを使います
*   **"null"** と入力すると、ホッパーの名前（フィルター）が削除されます

### ✅ この方法の利点
*   経験値を消費しない
*   金床を用意する手間がかからない
*   50文字以上の複雑なフィルターが設定可能
*   設定時に音が鳴るので成功したか分かりやすい

---

## 2. 基本構文

### パターン修飾子
フィルターの条件を指定するための記号です。

| 記号 | 意味 | 例 |
| :--- | :--- | :--- |
| **なし** | アイテム名が完全に一致する | `stone` → 石だけが通る |
| **,** | 複数の条件を並べる（どれか1つでも当てはまればOK） | `stone,dirt` → 石か土のどちらかが通る |
| **\*** | アイテム名にこの文字が含まれる | `*wood` → "wood"を含む全アイテム（例: oak_wood, birch_wood） |
| **^** | アイテム名がこの文字で始まる | `^oak` → "oak"で始まる全アイテム（例: oak_log, oak_planks） |
| **$** | アイテム名がこの文字で終わる | `$log` → "log"で終わる全アイテム（例: oak_log, birch_log） |
| **#** | Minecraftのタグに一致する | `#villager_plantable_seeds` → 村人が植えられる種全般 |
| **~** | ポーションに特定の効果がある | `~strength_2` → ストレングス2の効果を持つポーション |
| **+** | アイテムに特定のエンチャントがある | `+mending` → 修繕のエンチャントがついたアイテム |
| **=** | アイテムの表示名が一致する（金床でリネームしたものも含む） | `=my_sword` → "my_sword"という名前のアイテム |

### ブール演算子
複数の条件を組み合わせるための記号です。

| 記号 | 意味 | 使用例 |
| :--- | :--- | :--- |
| **&** | AND（すべての条件を満たす必要がある） | `*oak&!*wood` → "oak"を含むが"wood"は含まない |
| **\|** | OR（どれか1つの条件を満たせばOK） | `+fortune_3\|+silk_touch` → 幸運3かシルクタッチのどちらか |
| **!** | NOT（条件の否定） | `!stone` → 石以外のすべて |

### 📝 重要な注意事項
*   **アイテム名は内部名（翻訳キー）で指定します**
    - 例: 「石」ではなく `stone`、「オークの原木」ではなく `oak_log`
*   **アイテムの内部名を確認する方法:**
    1. ゲーム内で **F3 + H** キーを押す
    2. アイテムにカーソルを合わせる
    3. ツールチップに表示される名前（例: `minecraft:stone`）の `minecraft:` の後ろが内部名です
*   **OR演算子 `|` の制限:** ANDで繋がれた条件の中でのみ使えます（詳しくは後述）

---

## 3. 使用例

### 基本的な例

| フィルター設定 | 何が通るか |
| :--- | :--- |
| `oak_log` | オークの原木だけ |
| `^oak` | "oak"で始まる全アイテム（oak_log, oak_planks, oak_button など） |
| `$log` | "log"で終わる全アイテム（すべての種類の原木） |
| `*wood` | "wood"を含む全アイテム（すべての木材系アイテム） |
| `=my_pickaxe` | 金床で"my_pickaxe"と名付けたアイテム |

### 複合条件の例

| フィルター設定 | 何が通るか |
| :--- | :--- |
| `*wood,stone` | "wood"を含むアイテム、**または**"stone"という名前のアイテム |
| `#villager_plantable_seeds` | 村人が植えられる種のタグを持つすべてのアイテム |
| `#animals_spawnable_on&*grass` | 動物がスポーンできるブロックで、名前に"grass"が含まれるもの |
| `*oak&!*wood` | "oak"を含むが"wood"は含まないアイテム（ボタンやフェンスなど） |

### エンチャント・ポーションの例

| フィルター設定 | 何が通るか |
| :--- | :--- |
| `splash_potion&~strength_2` | ストレングス2のスプラッシュポーション |
| `enchanted_book&+mending` | 修繕のエンチャント本 |
| `+mending&+protection_4&+unbreaking_3` | 修繕、プロテクション4、アンブレイキング3の**3つすべて**がついたアイテム |

### 高度な例

#### 🔱 最強のネザライトツルハシだけを通すフィルター
```
netherite_pickaxe&+efficiency_5&+unbreaking_3&+mending&+fortune_3|+silk_touch
```
**意味:** ネザライトのツルハシで、効率強化5、アンブレイキング3、修繕があり、さらに幸運3**または**シルクタッチのどちらかがついているもの

#### 🌳 オーク製品から木材だけを除外するフィルター
```
*oak&!*wood
```
**意味:** 名前に"oak"を含むが、"wood"（木材）は含まないアイテム。ボタン、フェンス、ドア、階段などが通る

#### 🪴 村人が植えられる種をまとめて仕分け
```
#villager_plantable_seeds
```
**意味:** 小麦の種、ビートルートの種、ニンジン、ジャガイモなどがすべて通る

---

## 4. 動作の癖と注意点

### ⚠️ ホッパーの詰まり防止（最重要）
フィルターを設定したホッパーは、条件に合わないアイテムを受け取りません。
そのため、**想定外のアイテムがホッパーに入ると詰まって動かなくなります。**

#### 詰まりを防ぐための対策

| 対策 | 説明 |
| :--- | :--- |
| ✅ **フィルターなしのホッパーを必ず用意** | アイテム仕分けシステムの最後に、フィルターを設定していないホッパーとチェストを置く。これが「ゴミ箱」になり、どのフィルターにも引っかからないアイテムを受け止めます。 |
| ✅ **システム全体を設計してから作る** | どのアイテムをどこに振り分けるか、事前に紙に書き出すと失敗しにくいです。 |
| ❌ **すべてのホッパーにフィルター設定するのはNG** | 必ずフィルターなしの「受け皿」ホッパーを残してください。 |

### 🔄 賢いホッパー検索機能
このプラグインには、アイテムを最適なホッパーに振り分ける機能があります。

**動作の仕組み:**
1. アイテムがホッパーAからホッパーBに移動しようとする
2. ホッパーBにフィルター設定がない場合、システムは他に接続されているホッパーをチェック
3. ホッパーCにフィルターがあり、そのアイテムが条件に合う場合、ホッパーBではなくホッパーCに送られる

**これの効果:** アイテムが意図しないホッパーで分割されるのを防ぎ、同じアイテムが1箇所にまとまります。

### 📐 OR演算子の制限について
OR演算子 `|` は、AND演算子 `&` で繋がれた条件の中でしか使えません。

| 設定 | 動作 | 理由 |
| :--- | :--- | :--- |
| `+unbreaking_3&+fortune_3\|+efficiency_5&+silk_touch` | ❌ 動作しない | ORがANDブロックの外にあるため |
| `+unbreaking_3&+fortune_3,+efficiency_5&+silk_touch` | ✅ 正しく動作 | カンマ`,`で分けることで条件を分離 |

**回避方法:** 複雑な条件は、カンマ `,` で複数のフィルター設定に分けて書きましょう。

---

### 💡 使い方のコツ

#### 初めて使う人向け
*   **まずは簡単なフィルターから:** `stone` や `*wood` のような単純な設定で動作確認しましょう
*   **F3 + H を忘れずに:** アイテムの正確な内部名を確認してから設定すると失敗しません
*   **1つずつテストする:** 複雑なフィルターは一度に設定せず、段階的に作りましょう

#### システムを作るときのポイント
*   **必ず出口（ゴミ箱）を作る:** フィルターに引っかからないアイテムの逃げ道を必ず用意しましょう
*   **設計図を描く:** どのアイテムをどこに振り分けるか、紙に書いてから作ると失敗が減ります
*   **小規模から始める:** 最初は3〜5種類のアイテムを仕分けるシステムから始めて、慣れてから拡張しましょう
